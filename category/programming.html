<!DOCTYPE html>
<html lang="en">
<head>
        <title>Journal 75 - Programming</title>
        <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="http://launchyard.com/images/favicon.png"/>
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>


</head>

<body id="index" class="home">
	
  <!--      <header id="banner" class="body">
                <h1><a href="/"><img src="http://www.launchyard.com/images/logo.png" /></a></h1>
        </header> -->
<!-- /#banner -->
	      <div class="LaunchyardDetail"><p><a href="/"></a><img src="http://www.launchyard.com/images/LY-identity.png" width="100" height="100" alt="LaunchYard logo"><br/>LaunchYard helps launch startups<br/><a href="http://launchyard.com/" >Learn more &rarr;</a></p></div>

        
        

    
            <aside id="featured">
                <div class="body">
                    <article>
                        <h1 class="entry-title"><a href="/wordpress-flask-apache.html">WordPress + Flask + Apache</a></h1>
<div class="post-info">
	<ul>
        <li class="vcard author">
                 by&nbsp;<a class="url fn" href="/author/ashrafm.html">ashrafm</a>
        </li>
        <li class="published" title="2017-01-25T14:41:22+00:00">
          on&nbsp;Wed 25 January 2017
        </li>

	</ul>

</div><!-- /.post-info --><h2>Problem :</h2>
<p>You have a WordPress site, with Apache 2 server. How do you run Flask application alongside your WordPress site ?</p>
<h2>Solution :</h2>
<p>I assume that you have already created python program for your flask app. Let say your main python flask app filename is <code>testapp.py</code></p>
<p><strong>1&#46; Get wsgi mod</strong> for Apache web server. Use package installer.</p>
<p>In Ubuntu case :</p>
<div class="highlight"><pre><span></span>apt install libapache2-mod-wsgi
</pre></div>


<p>What is WSGI (web server gateway interface) ? It&#8217;s how your webserver &#8216;talks&#8217; to your application.</p>
<p>App&#8217;s output/input needs some kind of connection with the webserver so that this output/input can be channeled back/to the user&#8217;s browser request. This is where WSGI comes into picture.</p>
<p><strong>2&#46; Create wsgi file</strong> for your application. This will be located at the same level as your main flask app python file because we will call our flask app from this wsgi file.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span> <span class="nn">from</span> <span class="nn">testapp</span> <span class="nn">import</span> <span class="nn">app</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;/directory-path-to-your-app&#39;</span><span class="p">)</span>
</pre></div>


<p>Note : <strong>testapp</strong> is your main python flask app file (that consists of your Flask app entry point) and <strong>app</strong> is your Flask app that you define in your testapp.py</p>
<p>Save this file as testapp.wsgi</p>
<p><strong>3&#46; Modify your Apache conf file.</strong> Normally it&#8217;s located in <code>site-enabled</code> folder at <code>/etc/apache2/</code> Append the following within <code>&lt;VirtualHost&gt;&lt;/VirtualHost&gt;</code> tags.</p>
<div class="highlight"><pre><span></span>WSGIScriptAlias /flaskroot /directory-path-to-your-testapp.wsgi
<span class="nt">&lt;Directory</span> <span class="err">/directory-path-to-your-app</span><span class="nt">&gt;</span>
         Require all granted
<span class="nt">&lt;/Directory&gt;</span>
</pre></div>


<p>Note: <code>flaskroot</code> is the root link where your app will be accessed from the browser. It can be any name/link but obviously it can not be at the same location as your WordPress homepage link or other links that are generated by the WordPress (blog posts, pages, categories)</p>
<p>This is the simplest way to modify your Apache conf file. If you need more secured way to do this, you can follow <a href="http://flask.pocoo.org/docs/0.12/deploying/mod_wsgi/">flask apache deployment</a></p>
<p><strong>4&#46; Reload your Apache server</strong></p>
<div class="highlight"><pre><span></span>sudo service apache2 reload
</pre></div>


<p><strong>5&#46; Try to access your flask app via the link</strong> on your browser to see if what you have done is working.</p>
<p>Let say you define helloworld function in testapp.py that prints out strings in your browser.</p>
<p>Based on this example here, you can access the app as follows : <code>http://your-site/flaskroot/helloworld</code></p>
<h2>References</h2>
<p><a href="http://flask.pocoo.org/docs/0.12/deploying/mod_wsgi/">Flask Apache Deployment</a></p>
                    </article>
                </div>
            </aside><!-- /#featured -->
            
        
        

    
            <aside id="featured">
                <div class="body">
                    <article>
                        <h1 class="entry-title"><a href="/show-only-excerpt-of-full-post-on-homepage.html">Show Only Excerpt of Full Post On Homepage</a></h1>
<div class="post-info">
	<ul>
        <li class="vcard author">
                 by&nbsp;<a class="url fn" href="/author/ashrafm.html">ashrafm</a>
        </li>
        <li class="published" title="2017-01-16T15:35:03+00:00">
          on&nbsp;Mon 16 January 2017
        </li>

	</ul>

</div><!-- /.post-info --><h3>Objective :</h3>
<p>To prevent displaying full post on homepage/archive/category/tag pages. Display only excerpt of the full post on these pages.</p>
<p>From user&#8217;s perspective, they don&#8217;t want to scroll each full post on these pages. They want to read only the one they choose. What&#8217;s the point of displaying full post for all the posts on these types of pages ?</p>
<h3>Solutions :</h3>
<p><strong>1&#46; Manually break the post</strong></p>
<p>If you use editor in WordPress, you will notice a horizontal symbol in the editor&#8217;s toolbar. You can break your post by placing this break anywhere you want in the post.</p>
<p>On homepage/archive/category/tag pages, only portion before the break will be displayed. No more full post on these pages. Full post will only be shown when you go directly to the post page.</p>
<p>The drawback &#8211; you have to do this every time you write a new post unless you find a way to automate the process.</p>
<p><strong>2&#46; Use the_excerpt()</strong></p>
<p>On homepage/archive/category/tag pages, you&#8217;ll normally find a <code>have_posts()</code> loop to list down all the posts on these pages. After <code>the_post()</code> line, you can add <code>the_excerpt()</code>.</p>
<p>The excerpt doesn&#8217;t give the title post &#8211; only an excerpt of the post and link to continue reading. You need to add the title of the post.</p>
<p>I have done that below. You might want to add extras like dates, categories, tags &#8211; depending on what you want to have listed for each post.</p>
<p><code>&lt;?php&lt;br /&gt;
 while ( have_posts() ) :&lt;br /&gt;
    the_post(); ?&gt;&lt;br /&gt;
    &lt;h2&gt;&lt;a href="&lt;?php the_permalink(); ?&gt;"&gt;&lt;?php the_title() ?&gt;&lt;/a&gt;&lt;/h2&gt;&lt;br /&gt;
    &lt;?php&lt;br /&gt;
     the_excerpt();&lt;br /&gt;
 endwhile; ?&gt;</code></p>
<p><strong>UPDATE</strong></p>
<p>Apparantly, after studying the template codes, there is a much easier way to get around this. This is a theme-dependent code, hence please have a look at your code. I&#8217;m working on Twenty Seventeen theme.</p>
<p>Firstly, remove all the amendments from previous method.</p>
<p>Please find this line in index.php and archive.php :</p>
<p><code>get_template_part( 'template-parts/post/content', get_post_format() );</code></p>
<p>If you look into <code>template-parts/post/</code> folder, you will notice that the brilliant theme developers have already done this for you. They have already created template for excerpt type listing.</p>
<p>What you need to do is, change the above line to this :</p>
<p><code>get_template_part( 'template-parts/post/content-excerpt', get_post_format() );</code></p>
<p>See? Just a small edit ! (^_^)</p>
                    </article>
 
                </div>
            </aside><!-- /#featured -->
            
        
        <section id="extras" >
       
        
        </section><!-- /#extras -->
	
        <footer id="contentinfo" >
                <address id="about" class="vcard ">
                Proudly powered by <a href="http://getpelican.com/" target="_blank">Pelican</a>, which takes
                great advantage of <a href="http://python.org" target="_blank">Python</a>. &copy; <a class="url fn" href="http://launchyard.com">LaunchYard</a>
		
                </address><!-- /#about -->
		

                
        </footer><!-- /#contentinfo -->

</body>
</html>